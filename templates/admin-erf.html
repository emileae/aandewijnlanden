{% extends "cms.html" %}

{% block main %}

<div class="row">
	<div class="col s12">

		<table>
        <thead>
          <tr>
              <th data-field="erf_number">Stand Number</th>
              <th data-field="size">Size</th>
              <th data-field="price">Price</th>
              <th data-field="type">Type</th>
          </tr>
        </thead>

        <tbody>
          {% for e in erfs %}
          <form method="post" action="/admin/erf/{{e.key.id()}}" name="multipleForm">
	          <tr>
	            <td>{{e.erf_number}}</td>
	            <td>
	            	<!-- {{e.size}} -->
	            	<div class="input-field">
			          <input placeholder="eg. 200" type="number" class="validate" name="size" value="{{e.size|check_none}}">
			        </div>
	            </td>
	            <td>
	            	<!-- {{e.price}} -->
	            	<div class="input-field">
			          <input placeholder="eg. 1250000" type="number" class="validate" name="price" value="{{e.price|check_none}}">
			        </div>
	            </td>
	            <td>
	            	<!-- {{e.plan_type}} -->
	            	<div class="input-field">
			          <input placeholder="eg. A" type="text" class="validate" name="plan_type" value="{{e.plan_type|check_none}}">
			        </div>
	            </td>
	          </tr>
	      </form>
          {% endfor %}
        </tbody>
      </table>

      <div class="row">
      	<div class="col s12 center">
      		<button id="multipleFormSubmit" class="btn">Save All</button>
      	</div>
      </div>

	</div>
</div>

{% endblock %}


{% block script %}

<script type="text/javascript">
	
	$("body").on("click", "#multipleFormSubmit", function(){

		var count = 1;
		$('form[name="multipleForm"]').each(function () {
	        var $form = $(this);
	        $.post($form.attr("action"), $form.serialize(), function () {
	        	count += 1;
	            console.log("Form "+count+" posted");
	        });
	    });

	});
</script>

{% endblock %}



